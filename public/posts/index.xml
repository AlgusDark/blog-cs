<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Posts on CyrillSchumacher.com</title>
        <link>http://localhost:1313/posts/</link>
        <language>en-US</language>
        <author>Cyrill at Schumacher dot fm</author>
        <rights>Copyright (c) 2014, Cyrill Schumacher; all rights reserved.</rights>
        <updated>Tue, 16 Dec 2014 00:00:00 UTC</updated>
        
        <item>
            <title>Magento Grid Column Renderer</title>
            <link>http://localhost:1313/2014/12/16/magento-grid-column-renderer/</link>
            <pubDate>Tue, 16 Dec 2014 00:00:00 UTC</pubDate>
            <author>Cyrill at Schumacher dot fm</author>
            <guid>http://localhost:1313/2014/12/16/magento-grid-column-renderer/</guid>
            <description>&lt;p&gt;Today I&amp;rsquo;ve weird piece of code in &lt;code&gt;NameSpace_Module_Block_Product_Widget_Grid_Column_Renderer_PreparationWarehouse&lt;/code&gt; which affects extremely performance when loading a grid in the backend.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;class NameSpace_Module_Block_Product_Widget_Grid_Column_Renderer_PreparationWarehouse extends
    Mage_Adminhtml_Block_Widget_Grid_Column_Renderer_Abstract
{
    public function render(Varien_Object $row)
    {
        $html      = &#39;&#39;;
        $orderId   = $row-&amp;gt;getId();
        $productId = $this-&amp;gt;getColumn()-&amp;gt;getproduct_id();

        $orderItem = Mage::getModel(&#39;sales/order_item&#39;)
            -&amp;gt;getCollection()
            -&amp;gt;addFieldToFilter(&#39;order_id&#39;, $orderId)
            -&amp;gt;addFieldToFilter(&#39;product_id&#39;, $productId)
            -&amp;gt;getFirstitem();

        $orderItemId = $orderItem-&amp;gt;getId();

        $item                     = Mage::getModel(&#39;Module/SalesFlatOrderItem&#39;)-&amp;gt;load($orderItemId);
        $preparationWarehouseCode = $item-&amp;gt;getpreparation_warehouse();
        if ($preparationWarehouseCode) {
            $preparationWarehouse = Mage::getModel(&#39;Module/Warehouse&#39;)-&amp;gt;load($preparationWarehouseCode);
            $html .= $preparationWarehouse-&amp;gt;getstock_name();
        } else
            $html .= &#39;&amp;lt;font color=&amp;quot;red&amp;quot;&amp;gt;&#39; . $this-&amp;gt;__(&#39;Undefined&#39;) . &#39;&amp;lt;/font&amp;gt;&#39;;

        return $html;
    }
}
&lt;/code&gt;&lt;/pre&gt;
</description>
        </item>
        
    </channel>
</rss>
